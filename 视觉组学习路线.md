# 视觉组学习路线

本文更新：22.10.4

用于介绍视觉组的学习内容，让同学们心里有个数。
**视觉组主要负责：**

1. 搭建、训练车辆的视觉识别网络

2. 将目标在图像上的识别位置转换为目标相对于车辆的识别位置

3. 与导航组协调，进行机器人观测系统的搭建
   
   由此，我们将视觉组的主要学习，分以下几个部分：
- 基础知识框架：C++、Python、Cmake、Linux、ROS2、docker、github
- 视觉开发：Opencv、机器学习、目标追踪算法、云计算平台
  视觉组是机器人性能的基石，没有准确且快速的识别，我们在场上就是一个笨拙的靶子。
  我们最终目标是搭建一个实时运算，准确率高的目标识别网络。

## 准备

首先，你要做好一定的心理准备：

- 阅读并实操大量的文档(中文或英文)
- 搭建一些玄学的环境
- 深入的学习，运用数学工具（比做高考题有意思）
- 解决问题的思路：思考->搜索->讨论（问人）
- 因为我更喜欢阅读文档而不是看视频，所以推荐的资料多是文档

## 基础知识框架

视觉组的基础知识框架与导航组一样，[参见]()

## 视觉开发

视觉组的视觉开发，不单纯是深度学习的事情，我们真正要让技术落地，与别组合作，还得掌握一些硬件、通信的技术。比如上面提到的ROS2。同时，我们还要掌握工业相机的使用等。

### 概论

理论预计用时:5h

关于视觉组的开发范围，我推荐[鹿跃战队的视觉组开源教程](https://blog.csdn.net/neozng/category_11397138.html)作为概论学习，看看视觉组涵盖的基本知识 。不用看太仔细，过一过就好了。

### Opencv

理论预计用时：20h

**简介**
Opencv就是一个计算机图像处理库。可以理解它包含了很多类和函数。这些类和函数可以帮助你存储图像，传输图像，处理图像。

**安装**
可以在不同环境下选择不同语言的opencv，但是推荐先安装好ROS2，再用里面的Opencv（C++）。因为我们的主要开发环境是ROS2(galactic)自带的opencv。

- C++
  - Ubuntu下，下载好ROS2 galactic之后，我们就能在路径 /usr/include/opencv4/opencv2 下引用到opencv的库（hpp、cpp这些）。我们通常是在CMakeLists.txt中，使用find_package()来完成这个功能，具体参见Cmake的教程。
  - Ubuntu下，在使用vscode进行代码编写的时候，如果出现包找不到，名称飘红的情况，可以将以上路径添加到编译器的PATH中。
  - Windows的Opencv可参照文档。
- Python ： 
  - 可以在pycharm 或者 anaconda上面下载一个名为 opencv-python的包。！！！但是注意，anaconda的环境可能会与ROS2的环境有冲突，就是两边同时开着的时候，python包的查找会出现问题。

**学习资料**

- [【C++】【中文】简单教程](http://www.opencv.org.cn/opencvdoc/2.3.2/html/doc/tutorials/tutorials.html)
- [【C++】【英文】官方全面教程](https://docs.opencv.org/4.x/d9/df8/tutorial_root.html)
- [【Python】【中文】简单教程](https://opencv-python-tutorials.readthedocs.io/zh/latest/1.%20OpenCV%E7%AE%80%E4%BB%8B/1.1.%20OpenCV-Python%E6%95%99%E7%A8%8B%E4%BB%8B%E7%BB%8D/)

**提醒**

- 把相关的API过了一遍之后。就可以去动手写写考核任务的代码或者看看视觉的开源代码，以考核一下自己的学习效果。

### 云计算平台

要训练网络，就少不了算力。
在此特别推荐，我感觉市面上最便宜的算力[AutoDL](https://www.gpuhub.com/home)。此处应有广告费。可惜没有。

### 深度学习

理论预计用时：100+h

**目前方案：**

战队目前打算使用pytroch的深度学习框架，并且使用TenserRT、Openvino进行部署。

**学习流程：**
把深度学习切成两半，一边是数学理论，另一边是代码实现。我将学习阶段分成三个部分。阶段一，初学。你对理论和实操完全不理解，但是想要慢慢深入这个领域，探究是目标在图像上是如何识别到的。阶段二，小成。你对理论和实操都略有涉猎，但是总感觉自己的技术和能力还有很大的提升空间。阶段三，大成。你掌握了主流的理论、拥有一些炼丹的经验、依靠论文突破思路上的瓶颈。

**初学**

对于初学，我推荐你做两件事情：环境搭建、学习容易理解的课程。

环境搭建 ：

- Ubuntu:最好是有英伟达显卡可以用，没有也没关系。主要下载ananconda,cuda(有N家显卡),pytroch这三样东西。

容易理解的课程：

- [李宏毅2021、2022课程](https://www.bilibili.com/video/BV1Wv411h7kN?p=7&vd_source=a7a4b46a904073df2ce2942708049815)

**小成**

对于小成，你已经看过一些课程，较为系统地了解了一些机器学习、深度学习的知识，也有一个可以做小实验的环境。我推荐你：阅读、跑通代码、看一些比较难的课程。

推荐的教程：

- [李沐的D2L](https://zh.d2l.ai/)，有理论，也有实操，挺不错的。

**大成**
对于大成，我的评价是：阅读论文，跑通论文的代码，不断炼丹。当你能走到大成，也差不多可以联系导师，发发paper了。

### 阅读代码

视觉组除了要掌握知识，还得在实践中将这些知识变为代码融合成一个工程。阅读代码是非常重要的学习过程。正如，看得书少，文笔不好的道理。希望各位能从别人的代码中，发现自己的创新点。

你们也能从代码的角度，了解视觉组的任务，以及更广泛的技能点。

- [RM2021-上海交通大学-云汉交龙战队-视觉算法开源【RoboMaster论坛-科技宅天堂】](https://bbs.robomaster.com/forum.php?mod=viewthread&tid=12309)

- [RM2021-上海交通大学-云汉交龙战队-雷达站算法部分开源【RoboMaster论坛-科技宅天堂】](https://bbs.robomaster.com/forum.php?mod=viewthread&tid=12239)

- [GitHub - chenjunnn/rm_vision: RoboMaster 2022 视觉](https://github.com/chenjunnn/rm_vision)

以上资料均从[RoboMaster论坛](https://bbs.robomaster.com/forum.php?mod=forumdisplay&fid=63)中搜索出来，希望你们能活用资源，珍惜RM比赛中的开源氛围。

### 后记

目前的视觉组学习路线，肯定还有待优化。但我懂的也不多。等待你们成长之后，带着学到的技术，优化、甚至重构这份技术文档。